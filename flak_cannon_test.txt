@name 
@inputs Target:entity
@outputs Debug:angle Debug2
@persist Gravity LastTick Vel:vector Tk Grav PewDirection:vector BulletPos:vector Time Rang:ranger Dist Hit
#flak
#runOnTick(1)
interval(Tk*1000)
timer("revel",100)
#print(gravity())
beamPoint(1,entity():pos())

if(first()#[clk("revel")&((Dist<10)&(BulletPos:distance(Target:pos())<500))]#){
    Grav = gravity()
    Tk = tickInterval()
    #print(Tk*1000)
    
    PewDirection = entity():up()
    BulletPos = entity():pos()
    SpeedOffset = randint(1,0.02)
    Vel = (PewDirection * 135 * SpeedOffset * (1/Tk)) * (Tk/(1/66))   
        

}

rangerHitEntities(0)
Rang = rangerOffset(10000,BulletPos,vec(0,0,-1))
Dist = Rang:distance()

#print(Dist)
for(I=0,1000,10){
if(!(Dist<10)&!(BulletPos:distance(Target:pos())<500)){
if (Grav & Grav > 0) {
		Vel = Vel - vec(0,0,Grav) * Tk
	}
	BulletPos = BulletPos + Vel * Tk

}
 holoCreate(1,BulletPos)
if(I>=1000){
    print(BulletPos:distance(Target:pos()))
    reset()    
}
}
if(BulletPos:distance(Target:pos())<500){
    #print("hi")
}
if(owner():keyUse()){reset()}
beamPoint(2,BulletPos)
Debug = entity():pos():toAngle(BulletPos)
Debug2 = entity():pos():distance(BulletPos)
#LastTick = curtime() - LastTick

#[

BULLET.Name = "Flak Cannon"
BULLET.Author = "Divran"
BULLET.Description = "Shoots bullets which explode in midair, making it easier to shoot down airplanes."
BULLET.AdminOnly = false
BULLET.SuperAdminOnly = false

-- Appearance
BULLET.Model = "models/combatmodels/tankshell.mdl"
BULLET.Material = nil
BULLET.Color = nil
BULLET.Trail = nil

-- Effects / Sounds
BULLET.FireSound = {"arty/40mm.wav"}
BULLET.ExplosionSound = {"weapons/pipe_bomb1.wav","weapons/pipe_bomb2.wav","weapons/pipe_bomb3.wav"}
BULLET.FireEffect = "cannon_flare"
BULLET.ExplosionEffect = "pewpew_smokepuff"

-- Movement
BULLET.Speed = 135
--BULLET.Gravity = 0.06
BULLET.RecoilForce = 400
BULLET.Spread = 1
BULLET.AffectedBySBGravity = true

-- Damage
BULLET.DamageType = "BlastDamage"
BULLET.Damage = 250
BULLET.Radius = 850
BULLET.RangeDamageMul = 2
BULLET.NumberOfSlices = nil
BULLET.SliceDistance = nil
BULLET.PlayerDamage = 500
BULLET.PlayerDamageRadius = 1000

-- Reloading/Ammo
BULLET.Reloadtime = 2
BULLET.Ammo = 0
BULLET.AmmoReloadtime = 0

-- Other
BULLET.Lifetime = nil
BULLET.ExplodeAfterDeath = true
BULLET.EnergyPerShot = 2000
